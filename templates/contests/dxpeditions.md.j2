# DXpeditions

{% set sfi_color = 'teal' if sfi and sfi >= 150 else '2ea043' if sfi and sfi >= 100 else 'ffea00' if sfi and sfi >= 80 else 'orange' if sfi and sfi >= 70 else 'red' %}
{% set kp_color = 'red' if kp and kp >= 5 else 'orange' if kp and kp >= 4 else 'ffea00' if kp and kp >= 3 else 'teal' %}
{% set cond_color = 'red' if kp and kp >= 5 else 'orange' if kp and kp >= 4 else 'ffea00' if kp and kp >= 3 else 'teal' %}
![SFI](https://img.shields.io/badge/SFI_{{ sfi | default('--') }}-{{ sfi | classify_sfi | replace(' ', '_') }}-{{ sfi_color }}?style=flat-square)
![Kp](https://img.shields.io/badge/Kp_{{ kp | default('--') }}-{{ kp | classify_kp | replace(' ', '_') }}-{{ kp_color }}?style=flat-square)
![Conditions](https://img.shields.io/badge/Conditions-{{ conditions | default('Unknown') | replace(' ', '_') }}-{{ cond_color }}?style=flat-square)

*Updated {{ now.strftime('%H:%M UTC %Y-%m-%d') }}*

---

{% if dxpeditions %}
## Upcoming DXpeditions

| Callsign | Entity | Grid | Dates | Modes | Status |
|----------|--------|------|-------|-------|--------|
{% for dx in dxpeditions %}
| [{{ dx.callsign }}]({{ dx.url }}) | {{ dx.entity }} | {{ dx.grid }} | {{ dx.start.strftime('%b %d') }}–{{ dx.end.strftime('%b %d') }} | {{ dx.modes | join(', ') }} | {% if dx.status == 'active' %}**ON AIR**{% else %}{{ dx.days_until | fmt_countdown }}{% endif %} |
{% endfor %}

---

{% for dx in dxpeditions %}
## {{ dx.callsign }} — {{ dx.entity }}

{% if dx.status == 'active' %}
!!! success "Active Now"
    {{ dx.callsign }} is on the air from {{ dx.entity }}. Operation ends {{ dx.end.strftime('%Y-%m-%d') }}.
{% endif %}

| | |
|---|---|
| **Grid** | {{ dx.grid }} |
| **Dates** | {{ dx.start.strftime('%Y-%m-%d') }} to {{ dx.end.strftime('%Y-%m-%d') }} |
| **Bands** | {{ dx.bands | join(', ') }} |
| **Modes** | {{ dx.modes | join(', ') }} |
{% if dx.notes %}
| **Notes** | {{ dx.notes }} |
{% endif %}

{% if dxpedition_predictions and dx.callsign in dxpedition_predictions %}
**IONIS V20: KI7MT (DN13) to {{ dx.entity }} ({{ dx.grid }}) — SFI {{ sfi }}, Kp {{ kp }}**

| 10m | 15m | 20m | 40m | 80m | 160m |
|-----|-----|-----|-----|-----|------|
| {{ dxpedition_predictions[dx.callsign].get("10m", "\u2014") }} | {{ dxpedition_predictions[dx.callsign].get("15m", "\u2014") }} | {{ dxpedition_predictions[dx.callsign].get("20m", "\u2014") }} | {{ dxpedition_predictions[dx.callsign].get("40m", "\u2014") }} | {{ dxpedition_predictions[dx.callsign].get("80m", "\u2014") }} | {{ dxpedition_predictions[dx.callsign].get("160m", "\u2014") }} |

{% endif %}
---

{% endfor %}
{% else %}
*No upcoming DXpeditions tracked. Check the DX calendars below for announcements.*

---

{% endif %}

## DX Calendars

{% for cal in dx_calendars %}
- [{{ cal.name }}]({{ cal.url }})
{% endfor %}

---

*DXpeditions are curated from public announcements. Predictions use IONIS V20
with current solar conditions — actual DXpedition conditions may differ.
Mode thresholds: SSB &ge; +3 dB, RTTY &ge; -5 dB, CW &ge; -15 dB, FT8 &ge; -21 dB, WSPR &ge; -28 dB.
Past entries are filtered automatically. Add a DXpedition via
[PR to dxpeditions.yaml](https://github.com/IONIS-AI/ionis-hamstats/blob/main/data/dxpeditions.yaml).*
